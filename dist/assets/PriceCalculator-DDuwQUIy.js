import{r as i,_ as me,j as e}from"./index-BNPBOLjl.js";import Z from"./index-DttXfGgZ.js";import{C as ue,V as $,S as ge}from"./customerAccount-DlY9TAA7.js";import{c as xe}from"./crm-DDeGw0P0.js";function he(r){var W,V,K,X,H;const[h,w]=i.useState(!1),[k,A]=i.useState(!1),[S,j]=i.useState(null),[B,L]=i.useState([]),[q,z]=i.useState(!1),[d,s]=i.useState(null),[y,n]=i.useState(null),C=i.useRef(null),p=r.serviceDetails.frequency!=="onetime",I=i.useMemo(()=>({weekly:{interval_unit:"WEEK",interval_count:1,label:"Weekly",cycles_per_year:52,description:"Weekly cleaning service - billed every week"},biweekly:{interval_unit:"WEEK",interval_count:2,label:"Bi-weekly",cycles_per_year:26,description:"Bi-weekly cleaning service - billed every 2 weeks"},monthly:{interval_unit:"MONTH",interval_count:1,label:"Monthly",cycles_per_year:12,description:"Monthly cleaning service - billed every month"}}),[]),l=i.useCallback(x=>{var m;const u=new Date().toLocaleTimeString(),a=window.innerWidth<768||"ontouchstart"in window,c=`${a?"ğŸ“± [MOBILE]":"ğŸ–¥ï¸ [DESKTOP]"} [${u}] ${x}`;L(b=>[...b,c]),console.log(`PayPal Diagnostic: ${c}`),a&&console.log("ğŸ“± Mobile PayPal Context:",{screenSize:`${window.innerWidth}x${window.innerHeight}`,pixelRatio:window.devicePixelRatio,touchSupport:"ontouchstart"in window,userAgent:navigator.userAgent.substring(0,100),networkType:((m=navigator.connection)==null?void 0:m.effectiveType)||"unknown"})},[]),F=i.useCallback(async(x,u=!1)=>{try{l("Sending enhanced confirmation email..."),Z.init("Y8wW5l5Kiho70UhwU");const a=u?I[r.serviceDetails.frequency]:null,t={customer_name:r.customerDetails.name,customer_email:r.customerDetails.email,customer_phone:r.customerDetails.phone,service_type:r.serviceDetails.serviceType,service_frequency:r.serviceDetails.frequency,amount:`${r.amount.toFixed(2)} CAD`,order_id:x.id||x.subscriptionID||`VIP_${Date.now()}`,booking_date:new Date().toLocaleDateString(),customer_address:`${r.customerDetails.address}, ${r.customerDetails.city}, ${r.customerDetails.state} ${r.customerDetails.zipCode}`,payment_type:u?"Subscription":"One-time Payment",billing_frequency:u&&a?a.label:"One-time"};await Z.send("service_04l9qxe","template_azjian8",t),l("Enhanced confirmation email sent successfully")}catch(a){l(`Email sending failed: ${a}`),console.error("EmailJS Error:",a)}},[r.customerDetails,r.serviceDetails,r.amount,l,I]),o=i.useCallback(()=>{if(!(!window.paypal||!C.current)){l("Initializing enhanced PayPal buttons..."),C.current.innerHTML="";try{const x={style:{layout:"vertical",color:"blue",shape:"rect",height:45,label:p?"subscribe":"pay"},createOrder:(u,a)=>(l(`Creating enhanced PayPal order for amount: $${r.amount}`),a.order.create({purchase_units:[{amount:{value:r.amount.toFixed(2),currency_code:"CAD"}}]})),onApprove:async(u,a)=>{var t,c,m,b,D;l(`Enhanced PayPal payment approved: ${u.orderID}`),A(!0);try{const g=await a.order.capture();l("Enhanced payment captured successfully");const E={id:g.id,orderID:g.id,status:g.status,amount:(t=g.purchase_units[0])==null?void 0:t.amount};await F(E),console.log("ğŸš¨ PAYMENT CAPTURED - STORING BOOKING DATA NOW..."),console.log("ğŸ“‹ Customer Details:",r.customerDetails),console.log("ğŸ  Service Details:",r.serviceDetails),console.log("ğŸ’° Amount:",r.amount);const v=window.innerWidth<768||"ontouchstart"in window;if(v){console.log("ğŸ“± MOBILE PAYMENT STORAGE CONTEXT:"),console.log("Screen size:",window.innerWidth,"x",window.innerHeight),console.log("Available memory:",navigator.deviceMemory||"unknown"),console.log("Network type:",((c=navigator.connection)==null?void 0:c.effectiveType)||"unknown"),console.log("Storage API available:","storage"in navigator);try{const P=`mobile_payment_test_${Date.now()}`;localStorage.setItem(P,"test");const N=localStorage.getItem(P);localStorage.removeItem(P),console.log("ğŸ“± Mobile localStorage pre-test:",N==="test"?"PASS":"FAIL")}catch(P){console.error("ğŸ“± CRITICAL: Mobile localStorage pre-test FAILED:",P),l("ğŸš¨ MOBILE STORAGE PRE-TEST FAILED - STORAGE MAY BE COMPROMISED")}}const T=((m=r.accountCreation)==null?void 0:m.bookingNumber)||`VIP${Date.now()}${Math.random().toString(36).substring(2,8).toUpperCase()}`,f={id:`booking_${Date.now()}_${Math.random().toString(36).substring(2)}`,bookingNumber:T,customerName:r.customerDetails.name||"Unknown Customer",customerEmail:r.customerDetails.email||"unknown@email.com",customerPhone:r.customerDetails.phone||"Unknown Phone",serviceType:r.serviceDetails.serviceType||"residential",serviceDate:r.serviceDetails.date||new Date().toISOString().split("T")[0],serviceTime:r.serviceDetails.time||"09:00",serviceAddress:`${r.customerDetails.address||"Unknown Address"}, ${r.customerDetails.city||"Unknown City"}, ${r.customerDetails.state||"ON"} ${r.customerDetails.zipCode||"XXX XXX"}`,serviceArea:r.serviceDetails.location||"Niagara Region",amount:r.amount||0,status:"scheduled",paymentStatus:"paid",cleaningType:r.serviceDetails.cleaningType||"standard",frequency:r.serviceDetails.frequency||"onetime",addOns:r.serviceDetails.addOns||[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),deviceInfo:v?{isMobile:!0,screenSize:`${window.innerWidth}x${window.innerHeight}`,userAgent:navigator.userAgent.substring(0,100),timestamp:Date.now()}:void 0},_={id:g.id,customerName:r.customerDetails.name||"Unknown Customer",customerEmail:r.customerDetails.email||"unknown@email.com",customerPhone:r.customerDetails.phone||"Unknown Phone",serviceType:r.serviceDetails.serviceType||"residential",amount:r.amount||0,paymentMethod:"paypal",paypalOrderId:g.id,status:"completed",createdAt:new Date().toISOString(),serviceDate:r.serviceDetails.date||new Date().toISOString().split("T")[0],serviceTime:r.serviceDetails.time||"09:00",serviceAddress:`${r.customerDetails.address||"Unknown Address"}, ${r.customerDetails.city||"Unknown City"}, ${r.customerDetails.state||"ON"} ${r.customerDetails.zipCode||"XXX XXX"}`,serviceArea:r.serviceDetails.location||"Niagara Region",addOns:r.serviceDetails.addOns||[],frequency:r.serviceDetails.frequency||"onetime",bookingNumber:T,deviceInfo:v?{isMobile:!0,screenSize:`${window.innerWidth}x${window.innerHeight}`,userAgent:navigator.userAgent.substring(0,100),timestamp:Date.now()}:void 0},R=JSON.parse(localStorage.getItem("vip_admin_bookings")||"[]");R.unshift(f),localStorage.setItem("vip_admin_bookings",JSON.stringify(R));const U=JSON.parse(localStorage.getItem("vip_admin_transactions")||"[]");if(U.unshift(_),localStorage.setItem("vip_admin_transactions",JSON.stringify(U)),v){console.log("ğŸ“± MOBILE POST-STORAGE VERIFICATION:");const P=localStorage.getItem("vip_admin_bookings"),N=localStorage.getItem("vip_admin_transactions");if(P&&N){const M=JSON.parse(P),Q=JSON.parse(N),Y=M.find(G=>G.bookingNumber===T),J=Q.find(G=>G.id===g.id);console.log("ğŸ“± Mobile storage verification results:"),console.log("Booking found:",!!Y),console.log("Transaction found:",!!J),console.log("Total bookings stored:",M.length),console.log("Total transactions stored:",Q.length),!Y||!J?(console.error("ğŸš¨ MOBILE STORAGE VERIFICATION FAILED"),l("ğŸš¨ MOBILE: Data storage verification failed - booking or transaction not found")):(console.log("âœ… MOBILE STORAGE VERIFICATION PASSED"),l("âœ… MOBILE: Data storage verification successful"))}else console.error("ğŸš¨ MOBILE STORAGE CRITICAL FAILURE"),l("ğŸš¨ MOBILE: Critical storage failure - localStorage data not retrievable")}if(console.log("ğŸ‰ BOOKING SUCCESSFULLY STORED!"),console.log("ğŸ“… Booking Data:",f),console.log("ğŸ’³ Transaction Data:",_),console.log("ğŸ“Š Total Bookings Now:",R.length),console.log("ğŸ’° Total Transactions Now:",U.length),l(`ğŸ‰ SUCCESS: Stored booking #${T} and transaction #${g.id}`),(b=r.accountCreation)!=null&&b.enabled)try{const P=ue.getInstance(),{contactInfo:N,accountData:M}=r.accountCreation,Q={email:N.email,firstName:N.firstName,lastName:N.lastName,phone:N.phone,address:N.address,city:N.city,state:N.state,zipCode:N.zipCode,serviceArea:N.serviceArea,password:M.password,confirmPassword:M.confirmPassword,securityQuestion:M.securityQuestion,securityAnswer:M.securityAnswer},Y=await P.register(Q);if(Y){l("Customer account created successfully during enhanced checkout");const{NotificationService:J}=await me(async()=>{const{NotificationService:G}=await import("./notifications-BzgrSx2V.js");return{NotificationService:G}},[]);J.createBookingConfirmation(Y.id,r.accountCreation.bookingNumber,r.serviceDetails.date)}}catch(P){l(`Account creation failed: ${P}`),console.error("Error creating account during checkout:",P)}r.onPaymentSuccess()}catch(g){l(`Enhanced payment capture error: ${g}`),(D=r.onPaymentError)==null||D.call(r,"Enhanced payment processing failed")}finally{A(!1)}},onError:u=>{l(`Enhanced PayPal button error: ${u.message}`),j("Payment error occurred. Please try again."),A(!1)},onCancel:()=>{l("Enhanced payment cancelled by user"),A(!1)}};window.paypal.Buttons(x).render(".paypal-buttons-container"),l(`Enhanced PayPal buttons rendered successfully for ${p?"subscription":"one-time"} payment`)}catch(x){l(`Enhanced PayPal button initialization error: ${x}`),j("Failed to initialize enhanced PayPal buttons")}}},[r,p,F,l]),O=i.useCallback(async()=>{try{l("Loading enhanced PayPal SDK...");const x=document.querySelectorAll('script[src*="paypal.com"]');for(const c of x)c.remove();window.paypal&&(window.paypal=void 0);const u=document.createElement("script"),a="https://www.paypal.com/sdk/js?client-id=Aa8vB4DXr6emNdurQdi0fVw05XabxrMPM9aw4zHPRfXEFkhcHtFUki6rmIVarqLSH5zbAgG37O9kr2vj&currency=CAD&intent=capture&vault=true&components=buttons,funding-eligibility";u.src=a,u.async=!0,u.crossOrigin="anonymous";const t=new Promise((c,m)=>{u.onload=()=>{l("Enhanced PayPal SDK script loaded successfully"),setTimeout(()=>{window.paypal?(l("PayPal object confirmed with subscription support"),c(!0)):(l("PayPal object not found after script load"),m(new Error("PayPal SDK loaded but window.paypal not available")))},1e3)},u.onerror=b=>{l(`PayPal SDK script error: ${b}`),m(new Error("Failed to load PayPal SDK"))},setTimeout(()=>{l("PayPal SDK load timeout"),m(new Error("PayPal SDK load timeout"))},15e3)});document.head.appendChild(u),await t,w(!0),j(null),l("Enhanced PayPal SDK loaded successfully with subscription support")}catch(x){l(`PayPal SDK load failed: ${x}`),j(`Failed to load PayPal: ${x}`)}},[l]);return i.useEffect(()=>{h&&C.current&&o()},[h,o]),i.useEffect(()=>{!h&&!S&&O()},[h,S,O]),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Complete Payment"}),e.jsx("div",{className:"mb-6",children:p?e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"ğŸ”„ Professional Subscription Service"}),e.jsxs("p",{className:"text-blue-700 text-sm mb-2",children:[e.jsx("strong",{children:"Automatic billing:"})," You'll be charged $",r.amount.toFixed(2)," CAD ",(W=I[r.serviceDetails.frequency])==null?void 0:W.label.toLowerCase()," for ongoing professional service."]}),e.jsxs("div",{className:"text-blue-600 text-xs space-y-1",children:[e.jsxs("p",{children:["â€¢ First service: ",r.serviceDetails.date," at ",r.serviceDetails.time]}),e.jsx("p",{children:"â€¢ Billing starts: After first service completion"}),e.jsx("p",{children:"â€¢ Full control: Pause, modify, or cancel anytime in your dashboard"}),e.jsx("p",{children:"â€¢ Secure: Powered by PayPal's enterprise subscription platform"}),e.jsx("p",{children:"â€¢ Guaranteed: Priority scheduling and professional service guarantee"})]})]}):e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"ğŸ’³ One-time Professional Service"}),e.jsxs("p",{className:"text-green-700 text-sm mb-2",children:[e.jsx("strong",{children:"Single charge:"})," Pay $",r.amount.toFixed(2)," CAD for your professional one-time cleaning service."]})]})}),e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Amount:"})," $",r.amount.toFixed(2)," CAD ",p?`(${(V=I[r.serviceDetails.frequency])==null?void 0:V.label})`:"(One-time)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Customer:"})," ",r.customerDetails.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Service:"})," ",r.serviceDetails.serviceType," ",r.serviceDetails.cleaningType&&`- ${r.serviceDetails.cleaningType}`]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",r.serviceDetails.location]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Schedule:"})," ",r.serviceDetails.frequency==="onetime"?"One-time service":`${(K=I[r.serviceDetails.frequency])==null?void 0:K.label} recurring service`]}),((X=r.accountCreation)==null?void 0:X.enabled)&&e.jsxs("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-green-600",children:"âœ…"}),e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Creating VIP Customer Account"})]}),e.jsxs("p",{className:"text-xs text-green-700 mt-1",children:["Account email: ",r.accountCreation.contactInfo.email]}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"You'll be automatically logged in after payment completion with full dashboard access."})]})]}),e.jsxs("div",{children:[S&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:[e.jsxs("p",{className:"text-red-800 text-sm",children:[e.jsx("strong",{children:"Error:"})," ",S]}),e.jsxs("div",{className:"mt-2 space-x-2",children:[e.jsx("button",{onClick:()=>O(),className:"text-blue-600 underline text-sm hover:text-blue-800",children:"Try Again"}),e.jsxs("button",{onClick:()=>z(!q),className:"text-blue-600 underline text-sm hover:text-blue-800",children:[q?"Hide":"Show"," Details"]})]}),q&&e.jsxs("div",{className:"mt-3 bg-gray-100 border rounded p-2 text-xs font-mono max-h-40 overflow-y-auto",children:[e.jsx("p",{className:"font-bold mb-2",children:"Enhanced Diagnostic Log:"}),B.map((x,u)=>e.jsx("p",{className:"mb-1",children:x},`diagnostic-${u}-${x.substring(0,20)}`))]})]}),!h&&!S&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-3"}),e.jsx("p",{className:"text-gray-600",children:"Loading Enhanced PayPal System..."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:p?"Preparing subscription billing...":"Preparing secure payment..."})]}),h&&!S&&e.jsxs("div",{children:[e.jsx("div",{ref:C,className:"paypal-buttons-container min-h-[50px]"}),k&&e.jsxs("div",{className:"text-center mt-3 p-3 bg-blue-50 rounded",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),e.jsx("span",{className:"text-sm text-blue-700",children:p?"Setting up your professional subscription service...":(H=r.accountCreation)!=null&&H.enabled?"Processing payment and creating your VIP account...":"Processing your secure payment..."})]})]}),e.jsxs("div",{className:"mt-4 text-xs text-gray-500 text-center",children:[e.jsx("p",{children:"ğŸ”’ Secure payment powered by PayPal â€¢ Your financial information is never stored"}),p&&e.jsx("p",{className:"mt-1",children:"ğŸ“‹ Subscription managed through PayPal â€¢ Cancel anytime in your dashboard"})]})]})]})}function be({testimonials:r}){const[h,w]=i.useState(0),[k,A]=i.useState(!0);i.useEffect(()=>{if(!k)return;const d=setInterval(()=>{w(s=>(s+1)%r.length)},4e3);return()=>clearInterval(d)},[r.length,k]);const S=i.useCallback(()=>typeof window<"u"?window.innerWidth>=1024?3:window.innerWidth>=768?2:1:3,[]),[j,B]=i.useState(S);i.useEffect(()=>{const d=()=>{B(S())};return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[S]);const L=d=>{w(d)},q=()=>{w(d=>d===0?r.length-j:d-1)},z=()=>{w(d=>(d+1)%r.length)};return e.jsxs("div",{className:"max-w-5xl mx-auto mt-6 lg:mt-8 px-2 lg:px-0",children:[e.jsx("h3",{className:"text-xl lg:text-2xl font-bold text-center text-gray-900 mb-2 lg:mb-3",children:"What Our Customers Say"}),e.jsx("p",{className:"text-center text-gray-600 mb-3 lg:mb-5 text-xs lg:text-sm px-4",children:"Real reviews from real customers across the Niagara region"}),e.jsxs("div",{className:"relative",onMouseEnter:()=>A(!1),onMouseLeave:()=>A(!0),children:[e.jsx("button",{onClick:q,className:"absolute left-0 lg:-translate-x-3 top-1/2 -translate-y-1/2 -translate-x-1 z-10 bg-white shadow-md rounded-full p-1.5 lg:p-2 hover:bg-gray-50 transition-all duration-200 group","aria-label":"Previous testimonials",children:e.jsx("svg",{className:"w-3 h-3 lg:w-4 lg:h-4 text-gray-600 group-hover:text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:z,className:"absolute right-0 lg:translate-x-3 top-1/2 -translate-y-1/2 translate-x-1 z-10 bg-white shadow-md rounded-full p-1.5 lg:p-2 hover:bg-gray-50 transition-all duration-200 group","aria-label":"Next testimonials",children:e.jsx("svg",{className:"w-3 h-3 lg:w-4 lg:h-4 text-gray-600 group-hover:text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsx("div",{className:"overflow-hidden mx-4 lg:mx-0",children:e.jsx("div",{className:"flex transition-transform duration-500 ease-in-out",style:{transform:`translateX(-${h*(100/j)}%)`,width:`${r.length*100/j}%`},children:r.map((d,s)=>e.jsx("div",{className:"flex-shrink-0 px-1 lg:px-2",style:{width:`${100/r.length}%`},children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-3 lg:p-4 h-full border border-gray-100 hover:shadow-xl transition-shadow duration-300",children:[e.jsxs("div",{className:"flex items-center mb-2 lg:mb-3",children:[e.jsx("div",{className:"flex text-yellow-400 text-sm lg:text-base",children:[...Array(d.rating)].map((y,n)=>e.jsx("span",{className:"animate-pulse",children:"â­"},`star-${d.name}-${n}`))}),d.verified&&e.jsx("span",{className:"ml-2 text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded-full font-medium",children:"âœ“ Verified"})]}),e.jsxs("blockquote",{className:"text-gray-700 text-xs leading-relaxed mb-2 lg:mb-3 italic",children:['"',d.text,'"']}),e.jsx("div",{className:"border-t border-gray-100 pt-2 lg:pt-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-6 h-6 lg:w-8 lg:h-8 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center text-white font-bold text-xs mr-2",children:d.name.split(" ").map(y=>y[0]).join("")}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 text-xs",children:d.name}),e.jsxs("p",{className:"text-gray-500 text-xs",children:[d.location," â€¢ ",d.service]})]})]})})]})},`${d.name}-${s}`))})}),e.jsx("div",{className:"flex justify-center mt-3 lg:mt-5 space-x-1.5",children:Array.from({length:Math.ceil(r.length/j)}).map((d,s)=>e.jsx("button",{onClick:()=>L(s*j),className:`w-2 h-2 rounded-full transition-all duration-200 ${Math.floor(h/j)===s?"bg-gradient-to-r from-green-500 to-blue-500 scale-125":"bg-gray-300 hover:bg-gray-400"}`,"aria-label":`Go to testimonial group ${s+1}`},`dot-group-${s}-${j}`))}),e.jsx("div",{className:"flex justify-center mt-2 lg:mt-3",children:e.jsxs("div",{className:"flex items-center space-x-1.5 text-xs text-gray-500",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${k?"bg-green-500 animate-pulse":"bg-gray-300"}`}),e.jsxs("span",{className:"hidden lg:inline text-xs",children:[k?"Auto-playing":"Paused"," â€¢ Hover to pause"]}),e.jsx("span",{className:"lg:hidden text-xs",children:k?"Auto":"Paused"})]})})]})]})}const ve=[{name:"Sarah Mitchell",location:"St. Catharines",service:"Weekly Cleaning",rating:5,text:"VIP Cleaning Squad has been amazing! My house has never been cleaner and the team is so professional.",verified:!0},{name:"David Chen",location:"Niagara Falls",service:"Deep Cleaning",rating:5,text:"Outstanding service! They went above and beyond with attention to detail.",verified:!0},{name:"Maria Rodriguez",location:"Welland",service:"Move-in Cleaning",rating:5,text:"Perfect for our new home. Everything was spotless when they finished.",verified:!0},{name:"Jennifer Walsh",location:"Niagara-on-the-Lake",service:"Bi-weekly Cleaning",rating:5,text:"VIP Cleaning Squad is reliable, affordable, and they always exceed expectations!",verified:!0},{name:"Michael Thompson",location:"Thorold",service:"Commercial Cleaning",rating:5,text:"VIP Cleaning Squad keeps our office spotless every week. Professional, punctual, and reasonably priced!",verified:!0},{name:"Lisa Park",location:"Fort Erie",service:"Post-Construction",rating:5,text:"After our renovation, VIP Cleaning Squad made our home livable again. Incredible attention to detail!",verified:!0}],ee=[{value:"studio",label:"Studio/1BR",price:89,originalPrice:120},{value:"2br",label:"2 Bedrooms",price:109,originalPrice:145},{value:"3br",label:"3 Bedrooms",price:139,originalPrice:185},{value:"4br",label:"4 Bedrooms",price:169,originalPrice:225},{value:"5br",label:"5+ Bedrooms",price:199,originalPrice:265}],ae=[{value:"1",label:"1 Bathroom",price:0},{value:"2",label:"2 Bathrooms",price:15},{value:"3",label:"3 Bathrooms",price:30},{value:"4",label:"4 Bathrooms",price:45},{value:"5+",label:"5+ Bathrooms",price:60}],se=[{value:"standard",label:"Standard Cleaning",multiplier:1},{value:"deep",label:"Deep Cleaning",multiplier:1.5,badge:"Popular"},{value:"movein",label:"Move-in/Move-out",multiplier:1.8},{value:"construction",label:"Post-Construction",multiplier:2.2}],re=[{value:"onetime",label:"One-time",savings:0},{value:"monthly",label:"Monthly",savings:60,badge:"Save $60/year"},{value:"biweekly",label:"Bi-weekly",savings:120,badge:"Save $120/year"},{value:"weekly",label:"Weekly",savings:240,badge:"Most Popular"}],te=[{value:"fridge",label:"Inside Fridge",price:25,popular:!0},{value:"oven",label:"Inside Oven",price:25,popular:!0},{value:"windows",label:"Interior Windows",price:65},{value:"cabinets",label:"Kitchen Cabinets",price:45},{value:"garage",label:"Garage Cleaning",price:55},{value:"laundry",label:"Laundry Room",price:20}],le=[{value:"office",label:"Office Space",baseRate:.08},{value:"retail",label:"Retail Store",baseRate:.12},{value:"restaurant",label:"Restaurant",baseRate:.15},{value:"medical",label:"Medical Facility",baseRate:.18},{value:"warehouse",label:"Warehouse",baseRate:.06},{value:"gym",label:"Fitness Center",baseRate:.1}],ne=[{value:"500-1000",label:"500-1,000 sq ft",multiplier:1.2},{value:"1000-2500",label:"1,000-2,500 sq ft",multiplier:1},{value:"2500-5000",label:"2,500-5,000 sq ft",multiplier:.9},{value:"5000-10000",label:"5,000-10,000 sq ft",multiplier:.8},{value:"10000+",label:"10,000+ sq ft",multiplier:.7}],ie=[{value:"standard",label:"Standard Cleaning",multiplier:1},{value:"deep",label:"Deep Cleaning",multiplier:1.5,badge:"Popular"},{value:"sanitization",label:"Sanitization",multiplier:1.3},{value:"construction",label:"Post-Construction",multiplier:2},{value:"carpet",label:"Carpet Cleaning",multiplier:1.4},{value:"windows",label:"Window Cleaning",multiplier:1.2}],ce=[{value:"onetime",label:"One-time",savings:0},{value:"weekly",label:"Weekly",savings:600,badge:"Save $600/year"},{value:"biweekly",label:"Bi-weekly",savings:300,badge:"Save $300/year"},{value:"monthly",label:"Monthly",savings:180,badge:"Save $180/year"},{value:"daily",label:"Daily",savings:2400,badge:"Enterprise"}],oe=[{value:"1",label:"1 Restroom",price:0},{value:"2-3",label:"2-3 Restrooms",price:25},{value:"4-6",label:"4-6 Restrooms",price:50},{value:"7-10",label:"7-10 Restrooms",price:75},{value:"10+",label:"10+ Restrooms",price:100}],de=[{value:"breakroom",label:"Break Room Deep Clean",price:75,popular:!0},{value:"conference",label:"Conference Rooms",price:50,popular:!0},{value:"lobby",label:"Lobby Maintenance",price:65},{value:"elevator",label:"Elevator Cleaning",price:40},{value:"emergency",label:"Emergency Cleanup",price:150}];function Ne(){const[r,h]=i.useState(1),[w,k]=i.useState(0),[A,S]=i.useState(!1),[j,B]=i.useState(!1),[L,q]=i.useState(""),[z,d]=i.useState({}),[s,y]=i.useState({serviceType:"",homeSize:"",bedrooms:"",bathrooms:"",cleaningType:"",frequency:"",extras:[],commercialSpaceType:"",squareFootage:"",floors:"",restrooms:"",commercialExtras:[]}),[n,C]=i.useState({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",serviceArea:""}),[p,I]=i.useState({date:"",time:""}),[l,F]=i.useState(!1);i.useEffect(()=>{s.frequency&&s.frequency!=="onetime"&&F(!0)},[s.frequency]);const[o,O]=i.useState({password:"",confirmPassword:"",securityQuestion:"",securityAnswer:""}),W=async a=>{try{const t={...a,propertyType:s.serviceType,cleaningType:s.cleaningType,frequency:s.frequency,homeSize:s.homeSize,bathrooms:s.bathrooms,commercialSpaceType:s.commercialSpaceType,squareFootage:s.squareFootage,floors:s.floors,restrooms:s.restrooms,extras:[...s.extras,...s.commercialExtras],preferredDate:p.date,preferredTime:p.time,estimatedPrice:w},c=await xe.createLead(t);c.success?console.log("Lead created successfully:",c.leadId):console.error("Failed to create lead:",c.error)}catch(t){console.error("Error creating CRM lead:",t)}},V=i.useCallback(()=>{if(s.serviceType==="residential"){if(!s.homeSize||!s.cleaningType||!s.frequency||!s.bathrooms)return;const a=ee.find(v=>v.value===s.homeSize),t=se.find(v=>v.value===s.cleaningType),c=ae.find(v=>v.value===s.bathrooms);if(!a||!t||!c)return;const m=a.price;let b=m*t.multiplier;b+=c.price;const D=s.extras.reduce((v,T)=>{const f=te.find(_=>_.value===T);return v+((f==null?void 0:f.price)||0)},0);b+=D;const g=re.find(v=>v.value===s.frequency);g&&g.savings>0&&(b*=.9),k(Math.round(b*100)/100);const E={[`${a.label} Base`]:m,[`${t.label} (${t.multiplier}x)`]:m*(t.multiplier-1)};c.price>0&&(E[`${c.label}`]=c.price),D>0&&(E["Add-on Services"]=D),g&&g.savings>0&&(E["Recurring Service Discount"]=-(b/.9*.1)),d(E)}else if(s.serviceType==="commercial"){if(!s.commercialSpaceType||!s.squareFootage||!s.cleaningType||!s.frequency||!s.restrooms)return;const a=le.find(f=>f.value===s.commercialSpaceType),t=ne.find(f=>f.value===s.squareFootage),c=ie.find(f=>f.value===s.cleaningType),m=oe.find(f=>f.value===s.restrooms);if(!a||!t||!c||!m)return;const b=s.squareFootage==="500-1000"?750:s.squareFootage==="1000-2500"?1750:s.squareFootage==="2500-5000"?3750:s.squareFootage==="5000-10000"?7500:12500,D=b*a.baseRate;let g=D*c.multiplier*t.multiplier;g+=m.price;const E=s.commercialExtras.reduce((f,_)=>{const R=de.find(U=>U.value===_);return f+((R==null?void 0:R.price)||0)},0);g+=E;const v=ce.find(f=>f.value===s.frequency);v&&v.savings>0&&(g*=.85),k(Math.round(g*100)/100);const T={[`${a.label} Base (${b} sq ft)`]:D,[`${c.label} (${c.multiplier}x)`]:D*(c.multiplier-1),"Square Footage Adjustment":D*(t.multiplier-1)};m.price>0&&(T[`${m.label}`]=m.price),E>0&&(T["Additional Services"]=E),v&&v.savings>0&&(T["Recurring Service Discount"]=-(g/.85*.15)),d(T)}S(!0)},[s]);i.useEffect(()=>{V()},[V]);const K=a=>{y(t=>({...t,extras:t.extras.includes(a)?t.extras.filter(c=>c!==a):[...t.extras,a]}))},X=a=>{y(t=>({...t,commercialExtras:t.commercialExtras.includes(a)?t.commercialExtras.filter(c=>c!==a):[...t.commercialExtras,a]}))},H=()=>{const a=[];for(let t=8;t<=18;t++)a.push(`${t}:00`),t<18&&a.push(`${t}:30`);return a},x=i.useCallback(()=>{const a=Date.now().toString(),t=Math.random().toString(36).substring(2,8).toUpperCase();return`VIP${a.slice(-6)}${t}`},[]),u=i.useCallback(async a=>{console.log("ğŸ‰ PAYMENT SUCCESS HANDLER CALLED"),console.log("Calendar Event ID:",a);const t=x();q(t),console.log("Generated Booking Number:",t);try{console.log("ğŸ“Š Creating CRM Lead..."),await W({firstName:n.firstName,lastName:n.lastName,email:n.email,phone:n.phone,address:n.address})}catch(c){console.error("Error creating CRM lead:",c)}B(!0),h(5),setTimeout(()=>{console.log("ğŸ” POST-PAYMENT STORAGE CHECK:");const c=localStorage.getItem("vip_admin_bookings"),m=localStorage.getItem("vip_admin_transactions");if(console.log("Bookings after payment:",c?JSON.parse(c).length:0),console.log("Transactions after payment:",m?JSON.parse(m).length:0),c){const b=JSON.parse(c);console.log("Latest booking:",b[0])}if(m){const b=JSON.parse(m);console.log("Latest transaction:",b[0])}},2e3)},[x,n,W]);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50 py-8",children:e.jsxs("div",{className:"container mx-auto px-4",children:[r===1&&e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Choose Your Service Type"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Select the type of cleaning service you need"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[e.jsx("div",{onClick:()=>{y(a=>({...a,serviceType:"residential"})),h(2)},className:"bg-white rounded-xl shadow-lg p-8 cursor-pointer hover:shadow-xl transition-all transform hover:scale-105 border-2 border-transparent hover:border-green-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ğŸ "}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Residential Cleaning"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Professional home cleaning services for houses, apartments, and condos. Perfect for regular maintenance or deep cleaning."}),e.jsxs("ul",{className:"text-left space-y-2 mb-6 text-sm text-gray-700",children:[e.jsx("li",{children:"âœ“ Regular weekly, bi-weekly, or monthly cleaning"}),e.jsx("li",{children:"âœ“ One-time deep cleaning"}),e.jsx("li",{children:"âœ“ Move-in/move-out cleaning"}),e.jsx("li",{children:"âœ“ Post-construction cleanup"}),e.jsx("li",{children:"âœ“ Kitchen & bathroom sanitization"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-green-800 font-semibold",children:"Starting from $89"}),e.jsx("p",{className:"text-green-600 text-sm",children:"Based on home size and services"})]})]})}),e.jsx("div",{onClick:()=>{y(a=>({...a,serviceType:"commercial"})),h(2)},className:"bg-white rounded-xl shadow-lg p-8 cursor-pointer hover:shadow-xl transition-all transform hover:scale-105 border-2 border-transparent hover:border-blue-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ğŸ¢"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Commercial Cleaning"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Professional business cleaning services for offices, retail spaces, restaurants, medical facilities, and more."}),e.jsxs("ul",{className:"text-left space-y-2 mb-6 text-sm text-gray-700",children:[e.jsx("li",{children:"âœ“ Daily, weekly, or monthly service"}),e.jsx("li",{children:"âœ“ Office buildings & retail spaces"}),e.jsx("li",{children:"âœ“ Restaurants & medical facilities"}),e.jsx("li",{children:"âœ“ Warehouses & fitness centers"}),e.jsx("li",{children:"âœ“ Contract pricing available"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-blue-800 font-semibold",children:"Starting from $0.08/sq ft"}),e.jsx("p",{className:"text-blue-600 text-sm",children:"Volume discounts available"})]})]})})]}),e.jsx(be,{testimonials:ve})]}),r===2&&e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Configure Your Service"}),e.jsxs("p",{className:"text-xl text-gray-600",children:["Tell us about your ",s.serviceType," cleaning needs"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[s.serviceType==="residential"?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Home Size"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ee.map(a=>e.jsx("button",{onClick:()=>y(t=>({...t,homeSize:a.value})),className:`p-4 rounded-lg border-2 transition-all ${s.homeSize===a.value?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:a.label}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("span",{className:"text-green-600 font-bold",children:["$",a.price]}),a.originalPrice>a.price&&e.jsxs("span",{className:"text-gray-400 line-through ml-2",children:["$",a.originalPrice]})]})]})},a.value))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Number of Bathrooms"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:ae.map(a=>e.jsx("button",{onClick:()=>y(t=>({...t,bathrooms:a.value})),className:`p-4 rounded-lg border-2 transition-all ${s.bathrooms===a.value?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:a.label}),e.jsx("div",{className:"text-green-600 font-bold mt-1",children:a.price===0?"Included":`+${a.price}`})]})},a.value))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cleaning Type"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:se.map(a=>e.jsx("button",{onClick:()=>y(t=>({...t,cleaningType:a.value})),className:`p-4 rounded-lg border-2 transition-all ${s.cleaningType===a.value?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:a.label}),a.badge&&e.jsx("span",{className:"inline-block bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full mt-1",children:a.badge})]}),e.jsx("div",{className:"text-green-600 font-bold",children:a.multiplier===1?"Base Price":`${a.multiplier}x`})]})},a.value))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Frequency"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:re.map(a=>e.jsx("button",{onClick:()=>y(t=>({...t,frequency:a.value})),className:`p-4 rounded-lg border-2 transition-all ${s.frequency===a.value?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:a.label}),a.badge&&e.jsx("span",{className:"inline-block bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full mt-1",children:a.badge}),a.savings>0&&e.jsxs("div",{className:"text-green-600 text-sm mt-2",children:["Save $",a.savings,"/year"]})]})},a.value))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add-on Services"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:te.map(a=>e.jsx("button",{onClick:()=>K(a.value),className:`p-4 rounded-lg border-2 transition-all ${s.extras.includes(a.value)?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:a.label}),a.popular&&e.jsx("span",{className:"inline-block bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full mt-1",children:"Popular"})]}),e.jsxs("div",{className:"text-green-600 font-bold",children:["+$",a.price]})]})},a.value))})]})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Commercial Space Type"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:le.map(a=>e.jsx("button",{onClick:()=>y(t=>({...t,commercialSpaceType:a.value})),className:`p-4 rounded-lg border-2 transition-all ${s.commercialSpaceType===a.value?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:a.label}),e.jsxs("div",{className:"text-green-600 text-sm mt-2",children:["$",a.baseRate,"/sq ft base"]})]})},a.value))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Square Footage"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:ne.map(a=>e.jsx("button",{onClick:()=>y(t=>({...t,squareFootage:a.value})),className:`p-4 rounded-lg border-2 transition-all ${s.squareFootage===a.value?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:a.label}),e.jsx("div",{className:"text-green-600 text-sm mt-2",children:a.multiplier<1?`${Math.round((1-a.multiplier)*100)}% discount`:"Standard rate"})]})},a.value))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Number of Restrooms"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:oe.map(a=>e.jsx("button",{onClick:()=>y(t=>({...t,restrooms:a.value})),className:`p-4 rounded-lg border-2 transition-all ${s.restrooms===a.value?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:a.label}),e.jsx("div",{className:"text-green-600 font-bold mt-1",children:a.price===0?"Included":`+${a.price}`})]})},a.value))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Service Type"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ie.map(a=>e.jsx("button",{onClick:()=>y(t=>({...t,cleaningType:a.value})),className:`p-4 rounded-lg border-2 transition-all ${s.cleaningType===a.value?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:a.label}),a.badge&&e.jsx("span",{className:"inline-block bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full mt-1",children:a.badge}),e.jsx("div",{className:"text-green-600 text-sm mt-2",children:a.multiplier===1?"Base Price":`${a.multiplier}x rate`})]})},a.value))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Service Frequency"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:ce.map(a=>e.jsx("button",{onClick:()=>y(t=>({...t,frequency:a.value})),className:`p-4 rounded-lg border-2 transition-all ${s.frequency===a.value?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:a.label}),a.badge&&e.jsx("span",{className:"inline-block bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full mt-1",children:a.badge}),a.savings>0&&e.jsxs("div",{className:"text-green-600 text-sm mt-2",children:["Save $",a.savings,"/year"]})]})},a.value))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Services"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:de.map(a=>e.jsx("button",{onClick:()=>X(a.value),className:`p-4 rounded-lg border-2 transition-all ${s.commercialExtras.includes(a.value)?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:a.label}),a.popular&&e.jsx("span",{className:"inline-block bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full mt-1",children:"Popular"})]}),e.jsxs("div",{className:"text-green-600 font-bold",children:["+$",a.price]})]})},a.value))})]})]}),A&&e.jsx("div",{className:"mt-8 bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Your Quote"}),e.jsxs("div",{className:"text-4xl font-bold text-green-600 mb-4",children:["$",w.toFixed(2)]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Price Breakdown"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[Object.entries(z).map(([a,t])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[a,":"]}),e.jsxs("span",{className:`font-medium ${t<0?"text-green-600":"text-gray-900"}`,children:[t<0?"-":"+","$",Math.abs(t).toFixed(2)]})]},a)),e.jsxs("div",{className:"border-t pt-2 flex justify-between font-bold",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{className:"text-green-600",children:["$",w.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm text-gray-600 mb-4",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Free sanitization included ($25-50 value)"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Satisfaction guaranteed"]})]})]})}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx("button",{onClick:()=>h(1),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"â† Back"}),e.jsx("button",{onClick:()=>h(3),disabled:!A||s.serviceType==="residential"&&!s.bathrooms||s.serviceType==="commercial"&&!s.restrooms,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-lg hover:from-green-600 hover:to-blue-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue to Contact Info â†’"})]})]})]}),r===3&&e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Contact Information"}),e.jsx("p",{className:"text-xl text-gray-600",children:"We need your details for the appointment"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",value:n.firstName,onChange:a=>C(t=>({...t,firstName:a.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Your first name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",value:n.lastName,onChange:a=>C(t=>({...t,lastName:a.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Your last name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:n.email,onChange:a=>C(t=>({...t,email:a.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"your.email@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone *"}),e.jsx("input",{type:"tel",value:n.phone,onChange:a=>C(t=>({...t,phone:a.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"(555) 123-4567"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Address *"}),e.jsx("input",{type:"text",value:n.address,onChange:a=>C(t=>({...t,address:a.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"123 Main Street, City, Province"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Area *"}),e.jsxs("select",{value:n.serviceArea,onChange:a=>C(t=>({...t,serviceArea:a.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select your area"}),e.jsx("option",{value:"St. Catharines",children:"St. Catharines"}),e.jsx("option",{value:"Niagara-on-the-Lake",children:"Niagara-on-the-Lake"}),e.jsx("option",{value:"Niagara Falls",children:"Niagara Falls"}),e.jsx("option",{value:"Welland",children:"Welland"}),e.jsx("option",{value:"Fort Erie",children:"Fort Erie"}),e.jsx("option",{value:"Lincoln",children:"Lincoln"}),e.jsx("option",{value:"Pelham",children:"Pelham"}),e.jsx("option",{value:"Thorold",children:"Thorold"}),e.jsx("option",{value:"Grimsby",children:"Grimsby"})]})]})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx("button",{onClick:()=>h(2),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"â† Back"}),e.jsx("button",{onClick:()=>h(4),disabled:!n.firstName||!n.lastName||!n.email||!n.phone||!n.address||!n.serviceArea,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-lg hover:from-green-600 hover:to-blue-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue to Scheduling â†’"})]})]})]}),r===4&&e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Schedule & Payment"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Choose your date and complete payment"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Schedule Your Service"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Date *"}),e.jsx("input",{type:"date",value:p.date,onChange:a=>I(t=>({...t,date:a.target.value})),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Time *"}),e.jsxs("select",{value:p.time,onChange:a=>I(t=>({...t,time:a.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select a time slot"}),H().map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{className:"border-t pt-4",children:[s.frequency!=="onetime"&&s.frequency?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"âœ“"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Account Required for Recurring Service"}),e.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:["To manage your ",s.frequency," subscription, pause/cancel services, and track payments, an account is required."]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"createAccount",checked:!0,disabled:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded opacity-75"}),e.jsx("label",{htmlFor:"createAccount",className:"text-sm font-medium text-blue-900",children:"Create an account to track your bookings and manage services (Required)"})]})]})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("input",{type:"checkbox",id:"createAccount",checked:l,onChange:a=>F(a.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"createAccount",className:"text-sm font-medium text-gray-700",children:"Create an account to track your bookings and manage services (Optional)"})]})}),(s.frequency!=="onetime"||l)&&e.jsxs("div",{className:"space-y-3 bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"}),e.jsx("input",{type:"password",value:o.password,onChange:a=>O(t=>({...t,password:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Create a secure password"}),o.password&&e.jsxs("div",{className:"mt-1",children:[e.jsx("div",{className:"flex justify-between text-xs",children:e.jsx("span",{className:`${$.validatePassword(o.password).isValid?"text-green-600":$.validatePassword(o.password).errors.length<=2?"text-yellow-600":"text-red-600"}`,children:$.validatePassword(o.password).isValid?"Strong":$.validatePassword(o.password).errors.length<=2?"Good":"Weak"})}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1 mt-1",children:e.jsx("div",{className:`h-1 rounded-full transition-all ${$.validatePassword(o.password).isValid?"bg-green-500":$.validatePassword(o.password).errors.length<=2?"bg-yellow-500":"bg-red-500"}`,style:{width:`${$.validatePassword(o.password).isValid?100:$.validatePassword(o.password).errors.length<=2?75:25}%`}})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password *"}),e.jsx("input",{type:"password",value:o.confirmPassword,onChange:a=>O(t=>({...t,confirmPassword:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Confirm your password"}),o.confirmPassword&&o.password!==o.confirmPassword&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:"Passwords do not match"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Security Question *"}),e.jsxs("select",{value:o.securityQuestion,onChange:a=>O(t=>({...t,securityQuestion:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"",children:"Choose a security question"}),ge.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Security Answer *"}),e.jsx("input",{type:"text",value:o.securityAnswer,onChange:a=>O(t=>({...t,securityAnswer:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Enter your answer"})]}),e.jsxs("div",{className:"text-xs text-gray-600 bg-white p-2 rounded",children:[e.jsx("strong",{children:"Account Benefits:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"â€¢ Track all your bookings and payments"}),e.jsx("li",{children:"â€¢ Manage recurring services"}),e.jsx("li",{children:"â€¢ Rate and review your cleaning teams"}),e.jsx("li",{children:"â€¢ Receive service reminders and updates"})]})]})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Service Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Service Type:"}),e.jsx("span",{className:"font-medium",children:s.serviceType})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Customer:"}),e.jsxs("span",{className:"font-medium",children:[n.firstName," ",n.lastName]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Service Area:"}),e.jsx("span",{className:"font-medium",children:n.serviceArea})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Cost:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["$",w.toFixed(2)]})]})]})]})]}),e.jsxs("div",{children:[s.frequency!=="onetime"&&e.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"ğŸ”„"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-blue-900",children:["Recurring ",s.frequency.charAt(0).toUpperCase()+s.frequency.slice(1)," Service"]}),e.jsx("p",{className:"text-sm text-blue-700",children:"Account creation is required to manage your subscription, view payment history, and modify your recurring service schedule."})]})]})}),s.frequency!=="onetime"&&s.frequency&&(!o.password||!o.confirmPassword||o.password!==o.confirmPassword||!o.securityQuestion||!o.securityAnswer||!$.validatePassword(o.password).isValid)&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-red-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"!"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-900",children:"Account Required for Recurring Service"}),e.jsxs("p",{className:"text-sm text-red-700 mt-1",children:["Please complete all account creation fields above to proceed with your ",s.frequency," subscription payment."]})]})]})}),(s.frequency==="onetime"||s.frequency!=="onetime"&&o.password&&o.confirmPassword&&o.password===o.confirmPassword&&o.securityQuestion&&o.securityAnswer&&$.validatePassword(o.password).isValid)&&e.jsx(he,{amount:w,customerDetails:{name:`${n.firstName} ${n.lastName}`,email:n.email,phone:n.phone,address:n.address,city:n.city,state:n.state,zipCode:n.zipCode},serviceDetails:{serviceType:s.serviceType,frequency:s.frequency,date:p.date,time:p.time,location:n.serviceArea,cleaningType:s.cleaningType,addOns:[...s.extras,...s.commercialExtras]},accountCreation:l||s.frequency!=="onetime"?{enabled:!0,contactInfo:n,accountData:o,bookingNumber:x()}:void 0,onPaymentSuccess:u,onPaymentError:a=>{console.error("Payment error:",a),alert("Payment failed. Please try again.")}})]})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("button",{onClick:()=>h(3),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"â† Back to Contact Info"})})]}),r===5&&j&&e.jsx("div",{className:"max-w-4xl mx-auto text-center",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[e.jsx("div",{className:"text-6xl mb-6",children:"âœ…"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:l||s.frequency!=="onetime"?"Account Created & Booking Confirmed!":"Booking Confirmed!"}),e.jsx("p",{className:"text-xl text-gray-600 mb-6",children:l||s.frequency!=="onetime"?`Welcome to VIP Cleaning Squad! Your account has been created and your ${s.frequency!=="onetime"?`${s.frequency} subscription`:`${s.serviceType} cleaning service`} has been successfully set up.`:`Your ${s.serviceType} cleaning service has been successfully booked with Google Calendar integration.`}),(l||s.frequency!=="onetime")&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-4",children:"ğŸ‰ Your VIP Account is Ready!"}),e.jsxs("div",{className:"space-y-2 text-sm text-green-800",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[e.jsx("span",{children:"Email:"}),e.jsx("span",{className:"font-bold",children:n.email})]}),e.jsx("p",{className:"text-center",children:"You've been automatically logged in to your new account."})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-4",children:"Booking Details"}),e.jsxs("div",{className:"space-y-2 text-sm text-green-800",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Booking Number:"}),e.jsx("span",{className:"font-bold",children:L})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Service Date:"}),e.jsx("span",{children:p.date})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Service Time:"}),e.jsx("span",{children:p.time})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Service Area:"}),e.jsx("span",{children:n.serviceArea})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Paid:"}),e.jsxs("span",{children:["$",w.toFixed(2)]})]})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-blue-800",children:["ğŸ“§ A confirmation email has been sent to ",n.email," with all your booking details and calendar integration."]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"What's Next?"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ğŸ“…"}),e.jsx("h5",{className:"font-medium mb-1",children:"Calendar Reminder"}),e.jsx("p",{className:"text-gray-600",children:"You'll receive automatic reminders 24 hours and 1 hour before your service"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ğŸ§½"}),e.jsx("h5",{className:"font-medium mb-1",children:"Professional Service"}),e.jsx("p",{className:"text-gray-600",children:"Our trained team will arrive on time with all equipment"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl mb-2",children:"âœ¨"}),e.jsx("h5",{className:"font-medium mb-1",children:"Quality Guarantee"}),e.jsx("p",{className:"text-gray-600",children:"100% satisfaction guaranteed or we'll return to make it right"})]})]})]}),e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[l&&e.jsx("a",{href:"/?page=dashboard",className:"px-8 py-3 bg-gradient-to-r from-blue-500 to-green-500 text-white rounded-lg hover:from-blue-600 hover:to-green-600 transition-all font-semibold",children:"Go to My Dashboard"}),e.jsx("button",{onClick:()=>{h(1),y({serviceType:"",homeSize:"",bedrooms:"",bathrooms:"",cleaningType:"",frequency:"",extras:[],commercialSpaceType:"",squareFootage:"",floors:"",restrooms:"",commercialExtras:[]}),C({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",serviceArea:""}),I({date:"",time:""}),F(!1),O({password:"",confirmPassword:"",securityQuestion:"",securityAnswer:""}),k(0),S(!1),B(!1),q(""),d({})},className:"px-8 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-lg hover:from-green-600 hover:to-blue-600 transition-all font-semibold",children:"Book Another Service"})]}),l&&e.jsxs("div",{className:"text-sm text-blue-600 bg-blue-50 rounded-lg p-4",children:[e.jsx("p",{className:"font-medium mb-2",children:"ğŸ¯ What's Next with Your VIP Account:"}),e.jsxs("ul",{className:"space-y-1 text-left",children:[e.jsx("li",{children:"â€¢ Track this booking and all future services"}),e.jsx("li",{children:"â€¢ Receive automatic service reminders"}),e.jsx("li",{children:"â€¢ Rate and review your cleaning teams"}),e.jsx("li",{children:"â€¢ Manage recurring cleaning schedules"}),e.jsx("li",{children:"â€¢ Access payment history and receipts"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("p",{children:["Need help? Call us at ",e.jsx("a",{href:"tel:(289) 697-6559",className:"text-blue-600 hover:underline",children:"(289) 697-6559"})]}),e.jsxs("p",{children:["or email us at ",e.jsx("a",{href:"mailto:info@vipcleaningsquad.ca",className:"text-blue-600 hover:underline",children:"info@vipcleaningsquad.ca"})]})]})]})]})})]})})}export{Ne as default};
