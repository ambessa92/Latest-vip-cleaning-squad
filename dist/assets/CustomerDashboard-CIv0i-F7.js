import{r as i,j as e}from"./index-BNPBOLjl.js";import{C as v,a as C,P,b as k,V as b,S as L}from"./customerAccount-DlY9TAA7.js";const A=({onLoginSuccess:u})=>{const[c,p]=i.useState(!0),[m,l]=i.useState(!1),[h,o]=i.useState(""),[x,y]=i.useState({email:"",password:""}),[t,a]=i.useState({email:"",firstName:"",lastName:"",phone:"",address:"",city:"",state:"ON",zipCode:"",serviceArea:"",password:"",confirmPassword:"",securityQuestion:"",securityAnswer:""}),f=async r=>{r.preventDefault(),l(!0),o("");try{const d=await v.getInstance().login(x.email,x.password);d?(u(d),console.log("Login Successful:",d.firstName)):o("Invalid email or password. Please try again.")}catch(s){o("Login failed. Please check your credentials and try again."),console.error("Login error:",s)}finally{l(!1)}},n=async r=>{if(r.preventDefault(),l(!0),o(""),t.password!==t.confirmPassword){o("Passwords do not match"),l(!1);return}const s=b.validatePassword(t.password);if(!s.isValid){o(s.errors.join(", ")),l(!1);return}try{const g=await v.getInstance().register(t);g?(u(g),console.log("Account Created Successfully:",g.firstName)):o("Registration failed. Please try again.")}catch(d){o("Registration failed. This email may already be registered."),console.error("Registration error:",d)}finally{l(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"VIP Cleaning Squad"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:c?"Sign in to your account":"Create your account"}),e.jsx("p",{className:"text-gray-600",children:c?"Access your dashboard and manage your cleaning services":"Join VIP Cleaning Squad and book your first service"})]}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>{p(!0),o("")},className:`flex-1 py-2 px-4 rounded-md font-medium transition-colors ${c?"bg-white text-blue-600 shadow-sm":"text-gray-600"}`,children:"Sign In"}),e.jsx("button",{onClick:()=>{p(!1),o("")},className:`flex-1 py-2 px-4 rounded-md font-medium transition-colors ${c?"text-gray-600":"bg-white text-blue-600 shadow-sm"}`,children:"Register"})]}),h&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800 text-sm",children:h})}),c?e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:x.email,onChange:r=>y(s=>({...s,email:r.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"your.email@example.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsx("input",{type:"password",value:x.password,onChange:r=>y(s=>({...s,password:r.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your password",required:!0})]}),e.jsx("button",{type:"submit",disabled:m,className:"w-full py-3 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"Signing in...":"Sign In"})]}):e.jsxs("form",{onSubmit:n,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),e.jsx("input",{type:"text",value:t.firstName,onChange:r=>a(s=>({...s,firstName:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),e.jsx("input",{type:"text",value:t.lastName,onChange:r=>a(s=>({...s,lastName:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:t.email,onChange:r=>a(s=>({...s,email:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",value:t.phone,onChange:r=>a(s=>({...s,phone:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"(555) 123-4567",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Address"}),e.jsx("input",{type:"text",value:t.address,onChange:r=>a(s=>({...s,address:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"123 Main Street",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),e.jsx("input",{type:"text",value:t.city,onChange:r=>a(s=>({...s,city:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Province"}),e.jsx("select",{value:t.state,onChange:r=>a(s=>({...s,state:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:e.jsx("option",{value:"ON",children:"ON"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code"}),e.jsx("input",{type:"text",value:t.zipCode,onChange:r=>a(s=>({...s,zipCode:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"A1B 2C3",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Area"}),e.jsxs("select",{value:t.serviceArea,onChange:r=>a(s=>({...s,serviceArea:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select your area"}),e.jsx("option",{value:"St. Catharines",children:"St. Catharines"}),e.jsx("option",{value:"Niagara-on-the-Lake",children:"Niagara-on-the-Lake"}),e.jsx("option",{value:"Niagara Falls",children:"Niagara Falls"}),e.jsx("option",{value:"Welland",children:"Welland"}),e.jsx("option",{value:"Fort Erie",children:"Fort Erie"}),e.jsx("option",{value:"Lincoln",children:"Lincoln"}),e.jsx("option",{value:"Pelham",children:"Pelham"}),e.jsx("option",{value:"Thorold",children:"Thorold"}),e.jsx("option",{value:"Grimsby",children:"Grimsby"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx("input",{type:"password",value:t.password,onChange:r=>a(s=>({...s,password:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0}),t.password&&e.jsx("div",{className:"mt-1",children:e.jsx("div",{className:"text-xs",children:e.jsx("span",{className:`${b.validatePassword(t.password).isValid?"text-green-600":b.validatePassword(t.password).errors.length<=2?"text-yellow-600":"text-red-600"}`,children:b.validatePassword(t.password).isValid?"Strong":b.validatePassword(t.password).errors.length<=2?"Good":"Weak"})})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),e.jsx("input",{type:"password",value:t.confirmPassword,onChange:r=>a(s=>({...s,confirmPassword:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Security Question"}),e.jsxs("select",{value:t.securityQuestion,onChange:r=>a(s=>({...s,securityQuestion:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Choose a security question"}),L.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Security Answer"}),e.jsx("input",{type:"text",value:t.securityAnswer,onChange:r=>a(s=>({...s,securityAnswer:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0})]}),e.jsx("button",{type:"submit",disabled:m,className:"w-full py-3 px-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"Creating Account...":"Create Account"})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>{window.location.href="/"},className:"text-gray-600 hover:text-gray-800 text-sm font-medium",children:"← Back to Home"})})]})})},E=()=>{const[u,c]=i.useState(null),[p,m]=i.useState(!0),[l,h]=i.useState("overview"),[o,x]=i.useState([]),[y,t]=i.useState([]),[a,f]=i.useState([]);return i.useEffect(()=>{(async()=>{try{const s=v.getInstance().getCurrentCustomer();if(!s){m(!1);return}c(s);const d=new C,g=new P,j=new k,[N,w,S]=await Promise.all([d.getCustomerSubscriptions(s.id),g.getCustomerPayments(s.id),j.getCustomerServiceHistory(s.id)]);x(N),t(w),f(S)}catch(r){console.error("Error loading customer data:",r)}finally{m(!1)}})()},[]),p?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):u?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center py-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",u.firstName,"!"]}),e.jsx("p",{className:"text-gray-600",children:"Manage your cleaning services and account"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["Last login: ",u.lastLogin?new Date(u.lastLogin).toLocaleDateString():"First time"]}),e.jsx("button",{onClick:()=>{window.location.href="/"},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium",children:"← Back to Home"})]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",label:"Overview"},{id:"subscriptions",label:"Subscriptions"},{id:"payments",label:"Payments"},{id:"history",label:"Service History"},{id:"profile",label:"Profile"}].map(n=>e.jsx("button",{onClick:()=>h(n.id),className:`py-4 px-1 border-b-2 font-medium text-sm ${l===n.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:n.label},n.id))})})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l==="overview"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🏠"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Welcome to your VIP Dashboard!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your customer dashboard is being enhanced with new features."}),e.jsx("a",{href:"/",className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Book a Service"})]}),l==="subscriptions"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"🔄"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Subscription Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage your recurring cleaning services here."})]}),l==="payments"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"💳"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Payment History"}),e.jsx("p",{className:"text-gray-600",children:"View and download receipts for your payments."})]}),l==="history"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"📋"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Service History"}),e.jsx("p",{className:"text-gray-600",children:"Track your past and upcoming cleaning services."})]}),l==="profile"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"👤"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Profile Settings"}),e.jsx("p",{className:"text-gray-600",children:"Update your account information and preferences."})]})]})]}):e.jsx(A,{onLoginSuccess:n=>c(n)})};export{E as default};
